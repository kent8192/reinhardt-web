#!/bin/sh
# Reinhardt pre-commit hook
# Runs fmt and clippy checks before allowing commit

set -e

echo "ğŸ” Running pre-commit checks..."

# Run cargo make fmt (check mode)
echo "ğŸ“ Checking code formatting..."
if ! cargo make fmt; then
    echo ""
    echo "âŒ Code formatting check failed!"
    echo "ğŸ’¡ Run `cargo make fmt-fix` to fix formatting issues"
    exit 1
fi

# Run cargo make clippy
echo "ğŸ”§ Running clippy linter..."
if ! cargo make clippy; then
    echo ""
    echo "âŒ Clippy check failed!"
    echo "ğŸ’¡ Fix the warnings above before committing by `cargo make clippy-fix`"
    exit 1
fi

echo "âœ… All pre-commit checks passed!"
exit 0
