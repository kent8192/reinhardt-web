[package]
name = "reinhardt-rest"
version = "0.1.0-alpha.19"
description = "REST API framework aggregator for Reinhardt"
keywords = ["rest", "api", "web", "framework", "django"]
categories = ["web-programming", "web-programming::http-server"]
readme = "README.md"
documentation = "https://docs.rs/reinhardt-rest"
edition.workspace = true
license.workspace = true
repository.workspace = true

[features]
default = ["serializers", "parsers"]
serializers = ["reinhardt-core/serializers", "dep:reinhardt-db"]
parsers = []
jwt = ["reinhardt-auth/jwt"]
# Subcrate features (always enabled as non-optional dependencies, but exposed as features for compatibility)
pagination = []
filters = []
throttling = []
versioning = []
metadata = []
negotiation = []
browsable-api = []
openapi = []

# Aggregate all REST features
rest-full = [
  "serializers",
  "parsers",
  "jwt",
  "pagination",
  "filters",
  "throttling",
  "versioning",
  "metadata",
  "negotiation",
  "browsable-api",
  "openapi",
]
full = ["caching", "database-optimization", "geo-limiting", "json", "pages", "redis-backend", "serializers", "xml", "yaml"]
caching = ["dep:reinhardt-utils"]
database-optimization = ["dep:reinhardt-db"]
pages = []
json = []
xml = ["serde-xml-rs"]
yaml = []
redis-backend = ["reinhardt-throttling/redis-backend"]
geo-limiting = ["reinhardt-throttling/geo-limiting"]

[dependencies]
# Core dependencies
reinhardt-core = { workspace = true, features = ["exception", "negotiation", "pagination", "parsers", "serializers", "types"] }
reinhardt-db = { workspace = true, optional = true, features = ["backends", "orm", "pool"] }

# Authentication (required for auth types re-export)
reinhardt-auth = { workspace = true }

# Throttling framework
reinhardt-throttling = { workspace = true }

# HTTP framework
reinhardt-http = { workspace = true }

# Internal crates (now part of reinhardt-rest)

# Serialization
serde = { workspace = true, features = ["derive"]}
serde_json = { workspace = true }
serde_yaml = "0.9.33"
serde_urlencoded = "0.7"

# HTTP
hyper = { workspace = true }
bytes = { workspace = true }
mime = "0.3"

# Async
async-trait = { workspace = true }
futures-util = "0.3"

# Utilities
thiserror = "2.0.17"
urlencoding = "2.1"
chrono = { workspace = true }

# SQL (for serializers)
sqlx = { workspace = true }

# Multipart parsing (for parsers)
multer = "3.0"

# Rendering
quick-xml = { version = "0.38.3", features = ["serialize"] }
csv = "1.3"
utoipa = { version = "5.4", features = ["url", "uuid", "yaml"] }
tera = { workspace = true }
anyhow = { workspace = true }
reinhardt-utils = { workspace = true, optional = true, features = ["cache"] }
regex = "1.10"
geo-types = "0.7"
sha2 = "0.10"
hex = "0.4"
reinhardt-query = { workspace = true }
log = "0.4"
reinhardt-openapi-macros = { workspace = true }
indexmap = { version = "2.0", features = ["serde"] }
http = "1.3.1"
uuid = { workspace = true }
utoipa-swagger-ui = { version = "^9.0.2", default-features = false, features = [
    "vendored",
] }
once_cell = { workspace = true }
base64 = { workspace = true }
inventory = "0.3"
typed-arena = "2.0"
tokio = { workspace = true, features = ["sync", "time"]}
serde-xml-rs = { version = "0.8.1", optional = true }
redis = { version = "1.0.0-rc.2", features = [
  "tokio-comp",
  "connection-manager",
], optional = true }
parking_lot = "0.12"
maxminddb = { version = "0.26.0", optional = true }

[dev-dependencies]
tokio = { workspace = true, features = ["full", "test-util"]}
tokio-test = "0.4"
uuid = { version = "1.0", features = ["v4"] }
hyper = { workspace = true }
bytes = { workspace = true }
rstest = { workspace = true }
testcontainers = { workspace = true }
sqlx = { workspace = true }
tempfile = { workspace = true }
env_logger = "0.11"
reinhardt-db = { workspace = true, features = ["orm"] }
reinhardt-core = { workspace = true, features = ["exception"] }
reinhardt-auth = { workspace = true, features = ["argon2-hasher"] }
reqwest = { version = "0.12", features = ["json"] }
serial_test = { workspace = true }
