[package]
publish = false
name = "reinhardt-nosql"
version.workspace = true
description = "NoSQL database abstractions for Reinhardt framework"
edition.workspace = true
license.workspace = true
repository.workspace = true

[dependencies]
# Core dependencies
async-trait = { workspace = true }
thiserror = { workspace = true }
tokio = { workspace = true }
serde = { workspace = true }
serde_json = { workspace = true }
futures = { workspace = true }
aquamarine = { workspace = true }

# MongoDB dependencies (optional)
mongodb = { version = "3.0", optional = true, features = ["bson-3"] }
bson = { version = "3.0.0", optional = true }

# Redis dependencies (optional, Phase 2)
redis = { workspace = true, optional = true, features = ["tokio-comp", "cluster-async"] }

# Cassandra dependencies (optional, Phase 3)
cassandra-cpp = { version = "3.0", optional = true }

# DynamoDB dependencies (optional, Phase 4)
aws-sdk-dynamodb = { version = "1.0", optional = true }
aws-config = { version = "1.0", optional = true }

# Neo4j dependencies (optional, Phase 4)
neo4rs = { version = "0.7", optional = true }

[dev-dependencies]
tokio = { workspace = true, features = ["macros", "rt", "time"] }
serial_test = { workspace = true }
rstest = { workspace = true }
testcontainers = { workspace = true }
testcontainers-modules = { workspace = true }
reinhardt-test = { workspace = true, features = ["testcontainers"] }
uuid = { workspace = true }

[features]
# Individual backend features
mongodb = ["dep:mongodb", "dep:bson"]
redis = ["dep:redis"]
cassandra = ["dep:cassandra-cpp"]
dynamodb = ["dep:aws-sdk-dynamodb", "dep:aws-config"]
neo4j = ["dep:neo4rs"]

# Convenience feature groups (パラダイム別)
nosql-all = ["mongodb", "redis", "cassandra", "dynamodb", "neo4j"]
nosql-document = ["mongodb"]
nosql-key-value = ["redis", "dynamodb"]
nosql-column = ["cassandra"]
nosql-graph = ["neo4j"]

# Full feature (all features)
full = ["nosql-all"]
