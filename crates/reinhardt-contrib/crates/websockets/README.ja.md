# reinhardt-websockets

Reinhardtフレームワーク用のWebSocketサポート

## 概要

リアルタイム双方向通信のためのWebSocketプロトコルサポート。接続管理、メッセージルーティング、ルーム管理、およびインタラクティブなアプリケーションを構築するためのWebSocketハンドラートレイトを含みます。

## 機能

### 実装済み ✓

#### 接続管理

- `WebSocketConnection`: 個々のWebSocket接続を管理
  - 接続IDの追跡
  - テキスト、バイナリ、JSONメッセージの送信
  - 接続状態管理（オープン/クローズ）
  - エラーハンドリング付きの非同期メッセージ送信
- `WebSocketError`および`WebSocketResult`: 包括的なエラーハンドリング
  - 接続エラー
  - 送受信エラー
  - プロトコルエラー

#### メッセージタイプ

- `Message` enum: 複数のメッセージタイプのサポート
  - テキストメッセージ
  - バイナリメッセージ
  - Ping/Pongメッセージ
  - ステータスコード付きのCloseメッセージ
  - JSONシリアライゼーション/デシリアライゼーションヘルパー
- `WebSocketMessage` struct: タイムスタンプ付きの構造化メッセージフォーマット
  - メッセージタイプの分類
  - JSONデータペイロード
  - オプショナルなタイムスタンプサポート

#### ルーム管理

- `RoomManager`: マルチクライアントルーム管理
  - ルームへの参加/退出操作
  - 特定のルームへのメッセージブロードキャスト
  - 全ルームへのメッセージブロードキャスト
  - ルームサイズの追跡
  - すべてのアクティブなルームのリスト表示
  - async/awaitサポート付きのスレッドセーフ

#### ハンドラートレイト

- `WebSocketHandler`: カスタムWebSocketハンドラーを実装するためのトレイト
  - `on_message`: 受信メッセージの処理
  - `on_connect`: 新規接続の処理
  - `on_disconnect`: 切断の処理

### 予定

- WebSocketルーティング統合
- 認証および認可フック
- レート制限とスロットリング
- 自動再接続サポート
- メッセージ圧縮
- カスタムプロトコルサポート
- 分散システム用のチャネルレイヤー
- 高度なパターン用のConsumerクラス
- Reinhardtミドルウェアシステムとの統合
