// Preact 10.x - Lightweight React alternative
// This is a simplified SSR-compatible version for QuickJS
// Original: https://github.com/preactjs/preact (MIT License)

var preact = (function() {
	'use strict';

	// Virtual DOM node creation
	function h(type, props) {
		var children = [];
		var i, child;

		for (i = 2; i < arguments.length; i++) {
			child = arguments[i];
			if (child != null && child !== false && child !== true) {
				if (Array.isArray(child)) {
					children = children.concat(child);
				} else {
					children.push(child);
				}
			}
		}

		if (typeof type === 'function') {
			// Component
			return {
				type: type,
				props: Object.assign({}, props, { children: children.length === 1 ? children[0] : children }),
				key: props && props.key
			};
		}

		// Element
		return {
			type: type,
			props: Object.assign({}, props, { children: children.length === 1 ? children[0] : children }),
			key: props && props.key
		};
	}

	// Fragment component
	function Fragment(props) {
		return props.children;
	}

	return {
		h: h,
		createElement: h,
		Fragment: Fragment
	};
})();

// Expose globally
if (typeof globalThis !== 'undefined') {
	globalThis.preact = preact;
}
