# reinhardt-logging

Reinhardtフレームワークのためのロギング設定とユーティリティ

## 概要

複数のログ出力、ログレベル、カスタムフォーマッターをサポートする構造化ロギングシステムです。

リクエストロギング、エラーロギング、および外部ロギングサービスとの統合を含みます。

## 機能

### 実装済み ✓

#### コアロギングインフラストラクチャ

- **Loggerシステム**: ハンドラーアタッチメントサポートを備えたコアロガー実装
  - 警告レベルロギング付きの`Logger`構造体
  - 拡張可能なログ処理のためのHandlerトレイト
  - スレッドセーフなハンドラー管理
- **ログレベル**: Debug、Info、Warn、Error重要度レベルのサポート
- **ログレコード**: 構造化されたログレコード表現

#### ロギング設定

- **グローバルロギングマネージャー**: シングルトンベースのグローバルロギング初期化と管理
  - 一度だけのセットアップのための`init_global_logging()`
  - 名前付きロガーを取得するための`get_logger()`
  - `once_cell`によるスレッドセーフなアクセス
- **設定構造**:
  - `LoggingConfig`: メイン設定コンテナ
  - `HandlerConfig`: ハンドラー固有の設定
  - `LoggerConfig`: ロガー固有の設定

#### ログハンドラー

- **コンソールハンドラー**: 標準出力/標準エラーへのログ出力
- **ファイルハンドラー**: ファイルシステムへのログ書き込み
- **JSONハンドラー**: 構造化されたJSONログ出力
- **メモリハンドラー**: テストとデバッグのためのインメモリログストレージ
  - レベルベースのフィルタリング
  - テストアサーション用のクローン可能性

#### フォーマッター

- **Formatterトレイト**: 拡張可能なログフォーマットインターフェース
- **標準フォーマッター**: デフォルトの人間が読める形式
- **サーバーフォーマッター**: サーバー最適化ログフォーマット
- **制御文字エスケープ**: 安全なログ出力のための`escape_control_chars()`ユーティリティ

#### フィルター

- **Filterトレイト**: 汎用ログフィルタリングインターフェース
- **コールバックフィルター**: カスタムフィルター実装サポート
- **デバッグベースフィルター**:
  - `RequireDebugTrue`: デバッグモード有効時のみログ記録
  - `RequireDebugFalse`: デバッグモード無効時のみログ記録

#### パラメータ表現ユーティリティ

- **スマートパラメータトランケーション**: 大きなデータ構造によるログオーバーフローを防止
  - `repr_params()`: 配列、オブジェクト、ネストされた構造のトランケート
  - `truncate_param()`: 個別の文字列値のトランケート
  - `ReprParamsConfig`: 設定可能なトランケーション動作
- **マルチバッチパラメータ表示**: 大きなパラメータセットの最初/最後の項目を表示
- **文字レベルトランケーション**: 開始/終了コンテキストを保持する中間トランケーション
- **SQLAlchemyに触発された設計**: 実績のあるパラメータ表現パターンに基づく

#### 便利なAPI

- **グローバルロギング関数**:
  - `emit_warning()`: 警告の迅速な発行
  - `attach_memory_handler()`: テストハンドラーの簡単なアタッチ
- **型安全性**: 強く型付けされた設定とログレベル
- **非同期サポート**: 非同期ランタイム互換性のためTokio上に構築

### 予定

現在、すべての予定された機能が実装されています。
