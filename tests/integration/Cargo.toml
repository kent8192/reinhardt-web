[package]
name = "reinhardt-integration-tests"
version = "0.1.0-alpha.1"
edition = "2021"
publish = false
autotests = true

[dependencies]
# Reinhardt crates
reinhardt-apps = { workspace = true }
reinhardt-core = { workspace = true, features = [
  "http",
  "types",
  "exception",
  "di",
  "validators",
] }
reinhardt-panel = { workspace = true }
reinhardt-auth = { workspace = true, features = ["argon2-hasher"] }
reinhardt-security = { path = "../../crates/reinhardt-core/crates/security" }
reinhardt-http = { workspace = true }
reinhardt-params = { path = "../../crates/reinhardt-di/crates/params" }
reinhardt-di = { workspace = true }
reinhardt-middleware = { path = "../../crates/reinhardt-middleware" }
reinhardt-templates = { path = "../../crates/reinhardt-template/crates/templates" }
reinhardt-routers = { path = "../../crates/reinhardt-urls/crates/routers" }
reinhardt-proxy = { path = "../../crates/reinhardt-urls/crates/proxy" }
reinhardt-viewsets = { path = "../../crates/reinhardt-views/crates/viewsets" }
reinhardt-openapi = { path = "../../crates/reinhardt-rest/crates/openapi" }
reinhardt-graphql = { workspace = true }
reinhardt-db = { path = "../../crates/reinhardt-db" }
reinhardt-orm = { path = "../../crates/reinhardt-db/crates/orm" }
reinhardt-migrations = { path = "../../crates/reinhardt-db/crates/migrations" }
backends = { path = "../../crates/reinhardt-db/crates/backends", package = "reinhardt-backends" }
reinhardt-metadata = { path = "../../crates/reinhardt-rest/crates/metadata" }
reinhardt-versioning = { path = "../../crates/reinhardt-rest/crates/versioning" }
reinhardt-messages = { workspace = true }
reinhardt-parsers = { workspace = true }
reinhardt-exception = { path = "../../crates/reinhardt-core/crates/exception" }
reinhardt-types = { path = "../../crates/reinhardt-core/crates/types" }
reinhardt-signals = { path = "../../crates/reinhardt-core/crates/signals" }
reinhardt-websockets = { workspace = true }
reinhardt-server = { path = "../../crates/reinhardt-server" }
reinhardt-logging = { path = "../../crates/reinhardt-utils/crates/logging" }
reinhardt-mail = { workspace = true }
reinhardt-contenttypes = { workspace = true, features = ["database"] }
reinhardt-macros = { path = "../../crates/reinhardt-core/crates/macros" }
reinhardt-static = { workspace = true, features = ["templates-integration"] }
reinhardt-cache = { path = "../../crates/reinhardt-utils/crates/cache", features = [
  "redis-backend",
  "redis-sentinel",
  "memcached-backend",
] }
reinhardt-views-core = { path = "../../crates/reinhardt-views/crates/views-core" }
reinhardt-negotiation = { workspace = true }
reinhardt-renderers = { path = "../../crates/reinhardt-template/crates/renderers" }
reinhardt-serializers = { path = "../../crates/reinhardt-rest/crates/serializers" }
reinhardt-settings = { workspace = true, features = [
  "async",
  "dynamic-database",
  "dynamic-redis",
  "hot-reload",
  "caching",
] }
reinhardt-browsable-api = { path = "../../crates/reinhardt-rest/crates/browsable-api" }
reinhardt-i18n = { workspace = true }
reinhardt-tasks = { path = "../../crates/reinhardt-tasks", features = [
  "redis-backend",
  "rabbitmq-backend",
] }
reinhardt-rest = { path = "../../crates/reinhardt-rest" }
reinhardt-shortcuts = { path = "../../crates/reinhardt-shortcuts", features = [
  "database",
] }
reinhardt-pagination = { workspace = true }
reinhardt-filters = { path = "../../crates/reinhardt-rest/crates/filters" }
reinhardt-forms = { path = "../../crates/reinhardt-forms" }
reinhardt-throttling = { path = "../../crates/reinhardt-rest/crates/throttling" }
reinhardt-utils = { path = "../../crates/reinhardt-utils", features = [
  "cache",
  "logging",
] }
reinhardt-storage = { path = "../../crates/reinhardt-utils/crates/storage" }
reinhardt-test = { path = "../../crates/reinhardt-test", features = [
  "testcontainers",
] }
reinhardt-sessions = { workspace = true, features = ["database"] }

# Web framework (using reinhardt-apps)
tokio = { version = "1.0", features = ["full"] }
hyper = "1.0"
http = "1.0"
async-trait = "0.1"

# Database
sqlx = { version = "0.8", features = [
  "any",
  "postgres",
  "sqlite",
  "runtime-tokio",
  "tls-rustls",
  "chrono",
] }
sea-query = { workspace = true }
sea-query-binder = { version = "0.7", features = ["with-chrono"] }

# HTTP client for testing
reqwest = { version = "0.12", features = ["cookies"] }

# Serialization
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
bytes = "1.0"

# GraphQL
async-graphql = "7.0.17"
futures = "0.3"
futures-util = "0.3"

# Utilities
chrono = "0.4"
uuid = { version = "1.0", features = ["v4"] }
anyhow = "1.0"
base64 = "0.22"
percent-encoding = "2.3"
unic-langid = "0.9"
once_cell = "1.20"
serial_test = "3.2"
ctor = "0.6.0"
rstest = "0.26.1"
scopeguard = "1.2"
linkme = "0.3"

# Templates
tera = "1.20"

# Testing utilities
tempfile = "3.14"
testcontainers = "0.25.0"
testcontainers-modules = { version = "0.13", features = ["redis", "postgres"] }
image = { version = "0.25", default-features = false, features = ["png"] }

[features]
default = ["postgres", "sqlite", "caching", "hot-reload"]
testcontainers = []
postgres = ["reinhardt-orm/postgres", "backends/postgres"]
sqlite = ["reinhardt-orm/sqlite", "backends/sqlite"]
caching = ["reinhardt-settings/caching"]
hot-reload = ["reinhardt-settings/hot-reload"]
redis-backend = ["reinhardt-tasks/redis-backend"]
rabbitmq-backend = ["reinhardt-tasks/rabbitmq-backend"]

[dev-dependencies]
# Test utilities
tokio-test = "0.4"
