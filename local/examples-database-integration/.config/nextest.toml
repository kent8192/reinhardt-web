# Nextest Configuration for Database Integration Examples
#
# This configuration forces database tests to run serially because:
# 1. cargo-nextest runs tests in separate processes (not threads)
# 2. The `serial_test` crate only serializes within a single process
# 3. Tests use global state (static DB: OnceCell) that gets overwritten
#
# Without this configuration, multiple tests can:
# - Start different PostgreSQL containers
# - Overwrite the global DB connection
# - Cause "relation does not exist" errors when one test's container
#   is replaced by another test's container mid-execution

[profile.default]
# Force all tests to run one at a time
test-threads = 1

# Increase timeout for database operations
# Container startup + migrations can be slow
slow-timeout = "120s"
timeout = "180s"

# Retries for transient infrastructure failures
retries = { backoff = "exponential", max-retries = 2, seed = 12345 }
