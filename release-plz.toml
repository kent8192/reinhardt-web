# release-plz configuration for Reinhardt project
# Documentation: https://release-plz.ieni.dev/docs/config

[workspace]
# Changelog settings
changelog_update = true

# PR settings
pr_branch_prefix = "release/"
pr_labels = ["release", "automated"]
pr_name = "chore: release"

# Git release settings
git_release_enable = true
git_tag_enable = true
git_tag_name = "{{ package }}@v{{ version }}"
git_release_type = "auto"

# Publish settings
semver_check = false
publish_timeout = "10m"
dependencies_update = false

# Release settings:
# With release_always = true (default), release-plz will publish packages when:
# - Local version is higher than registry version
# - No git tag exists for the version
#
# Note: The two-stage release workflow (Release PR → merge → publish) is enforced by the
# GitHub Actions workflow condition, NOT by this setting. The workflow only runs on:
# 1. Merged PRs with 'release' + 'automated' labels, OR
# 2. Manual 'force_release' workflow_dispatch
#
# Therefore, release_always = true is safe and enables manual force_release for recovery.
# See: https://release-plz.ieni.dev/docs/config#the-release_always-field
release_always = true

# Skip cargo publish verification (dev-dependencies may reference unpublished workspace crates)
publish_no_verify = true

# Non-published packages (tests, examples, internal tools)
[[package]]
name = "reinhardt-test-support"
release = false
publish = false

[[package]]
name = "reinhardt-integration-tests"
release = false
publish = false

[[package]]
name = "reinhardt-benchmarks"
release = false
publish = false

[[package]]
name = "examples-hello-world"
release = false
publish = false

[[package]]
name = "examples-rest-api"
release = false
publish = false

[[package]]
name = "examples-database-integration"
release = false
publish = false

[[package]]
name = "examples-tutorial-basis"
release = false
publish = false

[[package]]
name = "examples-tutorial-rest"
release = false
publish = false

[[package]]
name = "examples-twitter"
release = false
publish = false

[[package]]
name = "examples-github-issues"
release = false
publish = false

[[package]]
name = "reinhardt-settings-cli"
release = false
publish = false

[changelog]
protect_breaking_commits = true
